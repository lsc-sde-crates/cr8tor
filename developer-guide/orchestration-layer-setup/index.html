
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="CR8TOR is a data orchestration tool that is 5-Safes compliant. It is designed to help Secure Data Environment operators to manage the ingress of curated datasets from a data warehouse or lake hoouse into a ressearch workspace.
">
      
      
        <meta name="author" content="https://github.com/lsc-sde-crates">
      
      
        <link rel="canonical" href="https://lsc-sde-crates.github.io/cr8tor/developer-guide/orchestration-layer-setup/">
      
      
        <link rel="prev" href="../../user-guide/troubleshooting/">
      
      
        <link rel="next" href="../source-setup/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Orchestration layer setup - CR8TOR - 5-Safes Compliant Data Orchestration</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#orchestration-layer-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CR8TOR - 5-Safes Compliant Data Orchestration" class="md-header__button md-logo" aria-label="CR8TOR - 5-Safes Compliant Data Orchestration" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CR8TOR - 5-Safes Compliant Data Orchestration
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Orchestration layer setup
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/lsc-sde-crates/cr8tor" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/create-new-dar-project/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Developer Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cr8tor-cli/commands/" class="md-tabs__link">
          
  
  Cr8tor CLI App

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cr8tor-publisher/overview/" class="md-tabs__link">
          
  
  Cr8tor Publisher App

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cr8tor-cookiecutter/overview/" class="md-tabs__link">
          
  
  CookieCutter Template

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../lscsde/infrastructure/" class="md-tabs__link">
          
  
  LSC SDE

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CR8TOR - 5-Safes Compliant Data Orchestration" class="md-nav__button md-logo" aria-label="CR8TOR - 5-Safes Compliant Data Orchestration" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    CR8TOR - 5-Safes Compliant Data Orchestration
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lsc-sde-crates/cr8tor" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/create-new-dar-project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create New DAR Project
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/update-resources-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update DAR files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/orchestrate-dar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orchestrate DAR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/approve-dar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Approve DAR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/environments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Orchestration layer setup
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Orchestration layer setup
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-runners" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Runners
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-organisation-settings" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Organisation settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-organisation-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Organisation secrets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-teams" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Teams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GitHub Teams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-members" class="md-nav__link">
    <span class="md-ellipsis">
      Adding new members
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-pat-token" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub PAT token
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dar-project-repo-settings" class="md-nav__link">
    <span class="md-ellipsis">
      DAR Project Repo settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../source-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Source setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cr8tor CLI App
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cr8tor CLI App
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-cli/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-cli/development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-cli/example_usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-cli/branching-strategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Branching Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cr8tor Publisher App
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Cr8tor Publisher App
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-publisher/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-publisher/approval-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Approval Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-publisher/metadata-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metadata Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-publisher/publish-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publish Service
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CookieCutter Template
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            CookieCutter Template
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-cookiecutter/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cr8tor-cookiecutter/branching-strategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Branching Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LSC SDE
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            LSC SDE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lscsde/infrastructure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infrastructure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lscsde/azuredatashare/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Data Share
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lscsde/deployment-to-kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy to Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-runners" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Runners
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-organisation-settings" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Organisation settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-organisation-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Organisation secrets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-teams" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Teams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GitHub Teams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-members" class="md-nav__link">
    <span class="md-ellipsis">
      Adding new members
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-pat-token" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub PAT token
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dar-project-repo-settings" class="md-nav__link">
    <span class="md-ellipsis">
      DAR Project Repo settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="orchestration-layer-setup">Orchestration layer setup<a class="headerlink" href="#orchestration-layer-setup" title="Permanent link">&para;</a></h1>
<p>This section explains key setup up requirements for the Orchestration layer of Cr8tor Solution.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#orchestration-layer-setup">Orchestration layer setup</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#github-runners">GitHub Runners</a></li>
<li><a href="#github-organisation-settings">GitHub Organisation settings</a></li>
<li><a href="#github-organisation-secrets">GitHub Organisation secrets</a></li>
<li><a href="#github-teams">GitHub Teams</a><ul>
<li><a href="#adding-new-members">Adding new members</a></li>
</ul>
</li>
<li><a href="#github-pat-token">GitHub PAT token</a></li>
<li><a href="#dar-project-repo-settings">DAR Project Repo settings</a></li>
</ul>
<h2 id="github-runners">GitHub Runners<a class="headerlink" href="#github-runners" title="Permanent link">&para;</a></h2>
<p>GitHub runners must:</p>
<ul>
<li>
<p>be <strong>a single runner per environment</strong>. Currently, in LSC SDE Crates organisation there are three environments defined: DEV, TEST, PROD.</p>
</li>
<li>
<p>be <strong>Windows</strong> type (if Unix based, then cr8tor orchestrator.yml workflow requires updates from pwsh commands to batch commands).</p>
</li>
<li>
<p>have a <strong>tag</strong> with pattern <code>&lt;env&gt;-cr8tor-vm</code>, e.g. <code>dev-cr8tor-vm</code>. Required by Orchestrator workflow.</p>
</li>
<li><code>dev-cr8tor-vm</code></li>
<li><code>test-cr8tor-vm</code></li>
<li>
<p><code>prod-cr8tor-vm</code></p>
</li>
<li>
<p>have <strong>git</strong> (<a href="https://git-scm.com/downloads/win">https://git-scm.com/downloads/win</a>) and <strong>github cli</strong> (<a href="https://cli.github.com/">https://cli.github.com/</a>) installed.</p>
</li>
<li>
<p>set up in GitHub at <strong>Organisation level</strong>.</p>
</li>
</ul>
<p><a class="glightbox" href="../../assets/screenshots/organisation_runners.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="organisation runners" src="../../assets/screenshots/organisation_runners.png" /></a></p>
<h2 id="github-organisation-settings">GitHub Organisation settings<a class="headerlink" href="#github-organisation-settings" title="Permanent link">&para;</a></h2>
<p>Apart from the default GitHub Organisation settings, make sure to have below:</p>
<ul>
<li>Actions -&gt; General -&gt; <strong>Workflow permissions: Read ad write permissions</strong>. Also, <strong>Allow GitHub Actions to create and approve pull requests</strong>.</li>
</ul>
<h2 id="github-organisation-secrets">GitHub Organisation secrets<a class="headerlink" href="#github-organisation-secrets" title="Permanent link">&para;</a></h2>
<p>In order to use Cr8tor-Publisher microservices (deployed to Kubernetes), we need to provide Host and Token information for Approval Service Endpoint, for each environment seperatly.</p>
<p>The secrets must be stored at Organisation level and follow the name pattern:</p>
<ul>
<li>
<p><code>APPROVALS_API_TOKEN_&lt;DEV/TEST/PROD&gt;</code></p>
</li>
<li>
<p><code>APPROVALS_HOST_&lt;DEV/TEST/PROD&gt;</code>, for example <em>http://localhost</em></p>
</li>
</ul>
<p><a class="glightbox" href="../../assets/screenshots/organisation_environments_secrets.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="organisation secrets for approval service" src="../../assets/screenshots/organisation_environments_secrets.png" /></a></p>
<p>The very same API Token secrets must be stored in the Key Vault which is mounted/accessed by the Microservice (e.g. Azure Key Vault).
<a class="glightbox" href="../../assets/screenshots/microapps_kv_secrets.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="microservices keyvault secrets" src="../../assets/screenshots/microapps_kv_secrets.png" /></a></p>
<h2 id="github-teams">GitHub Teams<a class="headerlink" href="#github-teams" title="Permanent link">&para;</a></h2>
<p>The Orchestration layer relies on the GitHub Teams. There are <strong>three types of teams</strong> defined:</p>
<ul>
<li><code>cr8-ALL-projects-approver</code> - currently, a single group which will approve all DAR requests. Members are notified when the GitHub Orchestration workflow reaches specific environments, such as <code>signoff</code> (indicating the need for final approval before deployment) or <code>disclosure</code> (indicating readiness for public release). By default, members have <strong>READ</strong> role on assigned DAR repositories.</li>
<li><code>devops_admin</code> - team is used in the CODEOWNERS file defined in each DAR repository in the .github folder. The CODEOWNERS file specifies individuals or teams responsible for reviewing changes to specific files or directories in the repository. This ensures that updates to critical files, such as workflow definitions, are reviewed and approved by the appropriate team. By default, members have <strong>WRITE</strong> role on assigned DAR repositories.</li>
<li><code>cr8-&lt;project_name&gt;-contributor</code> - team created automatically during DAR repository initiation when the <code>cr8tor initiate</code> command is executed. Members have <strong>WRITE</strong> role on assigned DAR repositories.</li>
</ul>
<p>The <code>cr8-ALL-projects-approver</code> and <code>devops_admin</code> teams must be created <strong>manually</strong> if they do not exist in the GitHub organisation. This is because these teams are organisation-wide and not tied to a specific project, unlike <code>cr8-&lt;project_name&gt;-contributor</code>, which is created <strong>automatically</strong> during the initiation of a new DAR project.</p>
<p><a class="glightbox" href="../../assets/screenshots/github_teams.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="github teams" src="../../assets/screenshots/github_teams.png" /></a></p>
<h3 id="adding-new-members">Adding new members<a class="headerlink" href="#adding-new-members" title="Permanent link">&para;</a></h3>
<p>Click on a chosen team <code>cr8-ALL-projects-approver</code>, <code>devops_admin</code> or <code>cr8-&lt;project_name&gt;-contributor</code>, then <strong>Add a member</strong>. Invitation to Organisation might be required.</p>
<h2 id="github-pat-token">GitHub PAT token<a class="headerlink" href="#github-pat-token" title="Permanent link">&para;</a></h2>
<p><a href="../../cr8tor-cli/commands/#initiate-project">Cr8tor Initiate command</a> uses a Fine-grained Personal access token (PAT) to create a DAR project repository in GitHub or to create a new GitHub Team for DAR project's contributors and assigning other organisational and repository level settings.</p>
<p>The fine-grained PAT token needs to be created by GitHub Organisation administrator. It should have the following permissions:</p>
<p><strong>Repository permissions</strong>:</p>
<ul>
<li>Administration: Read and write</li>
<li>Contents: Read and write</li>
<li>Metadata: Read-only</li>
<li>Pull requests: Read and write</li>
<li>Workflows: Read and write</li>
</ul>
<p><strong>Organization permissions</strong>:</p>
<ul>
<li>Members: Read and write</li>
</ul>
<p>Steps:</p>
<ol>
<li>Go to GitHub Settings to generate PAT token (<a href="https://github.com/settings/personal-access-tokens/">https://github.com/settings/personal-access-tokens/</a>)
<br />
<a class="glightbox" href="../../assets/screenshots/github_pat_token_1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="github personal access token generate" src="../../assets/screenshots/github_pat_token_1.png" width="75%" /></a>
<br /></li>
<li>Use following settings:
<strong>name</strong>: provide the value that you will easily identify PAT's permissions for. e.g. LSC-Crates-Rocrate-Scope
<strong>resource owner</strong>: restrict to the GitHub Organisation containing DAR repos, e.g. lsc-sde-crates
<strong>expiration</strong>: eg 366 days or less
<strong>repository access</strong>: set to ALL repositories, as we use PAT token to create new private repos
<strong>permissions</strong> see the above list.
<br />
<a class="glightbox" href="../../assets/screenshots/github_pat_token_2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="cr8tor personal access token generate 2" src="../../assets/screenshots/github_pat_token_2.png" width="75%" /></a>
<br />
Once the PAT token is created you should see below summary:
<a class="glightbox" href="../../assets/screenshots/github_pat_token_3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="cr8tor personal access token generate 3" src="../../assets/screenshots/github_pat_token_3.png" width="75%" /></a>
<br /></li>
<li>Go to the <strong>CR8TOR Repository</strong> and create/update the <strong>repository secret</strong> named <strong>ORG_LVL_RW_REPOS_TEAMS</strong>.
  We use the secret in the Init RO-Crate Project workflow running cr8tor initate command using the Github runner.
  If you want to run cr8tor commands locally, create/obtain the token with the same permission scope.
<a class="glightbox" href="../../assets/screenshots/cr8tor_repo_secrets.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="cr8tor repo secrets" src="../../assets/screenshots/cr8tor_repo_secrets.png" /></a>
<a class="glightbox" href="../../assets/screenshots/cr8tor_workflow_init_token.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="cr8tor workflow github token" src="../../assets/screenshots/cr8tor_workflow_init_token.png" width="50%" /></a></li>
</ol>
<details class="warning" open="open">
<summary>Warning</summary>
<p><strong>ORG_LVL_RW_REPOS_TEAMS is only at cr8tor repository level, not organisational level</strong>.</p>
</details>
<h2 id="dar-project-repo-settings">DAR Project Repo settings<a class="headerlink" href="#dar-project-repo-settings" title="Permanent link">&para;</a></h2>
<p>Each new DAR project is automatically created with two repository level environments:</p>
<ul>
<li><code>signoff</code></li>
<li><code>disclosure</code></li>
</ul>
<p>Both of them have <strong>protection rules</strong> which requires <code>cr8-ALL-projects-approver</code> to review the workflow run.
This is all <strong>automatically set up</strong> on DAR repository creation when <a href="../../user-guide/create-new-dar-project/">cr8tor initiate command is run</a>.</p>
<p>Environments:
<br />
<a class="glightbox" href="../../assets/screenshots/project_repo_settings_env.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="project repo settings environments" src="../../assets/screenshots/project_repo_settings_env.png" width="75%" /></a>
<br />
Protection rules:
<br />
<a class="glightbox" href="../../assets/screenshots/project_repo_settings_env_rules.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="project repo settings environments protection rules" src="../../assets/screenshots/project_repo_settings_env_rules.png" width="75%" /></a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.expand", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.follow"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>